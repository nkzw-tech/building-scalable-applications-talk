export { Components } from './Components.tsx';
export { Themes } from './Themes.tsx';

--

image: /Cover1.jpg

--

<Visible>
  <Center>
    <LiquidGlass saturation={192}>
      <div
        children={<Logo />}
        style={{
          width: '600px',
          height: '200px',
        }}
      />
    </LiquidGlass>
  </Center>
</Visible>

---

theme: dark

--

<Visible>
  <Center>
    <div
      style={{
        display: 'grid',
        gap: 0,
        gridTemplateColumns: 'repeat(2, 1fr)',
        gridTemplateRows: 'repeat(2, 1fr)',
        position: 'absolute',
        inset: 0,
      }}
    >
      <Video className="video-intro" src="/AC.mp4" />
      <Video
        className="video-intro"
        src="/IntroReactNative.mp4"
        style={{ height: '101%' }}
      />
      <Video
        className="video-intro"
        src="/IntroTalk.mp4"
        style={{ height: '94%' }}
      />
      <Video className="video-intro" src="/IntroJest.mp4" />
    </div>
  </Center>
</Visible>

---

image: /CoverEmpty.jpg

transition: leaveOnly

--

<Center>
  <Appear>
    <div
      style={{
        marginTop: 45,
        width: 480,
        marginLeft: 25,
        color: '#fff',
        textWrap: 'balance',
      }}
    >
      <div>
        Nakazawa Tech is an open source company.
        <a
          href="mailto:christoph@nakazawa.dev"
          style={{
            color: '#fff',
            textDecorationColor: 'rgba(255, 255, 255, 0.3)',
          }}
        >
          Work with us.
        </a>
      </div>
      <div
        style={{
          flexWrap: 'nowrap',
          display: 'flex',
          flexDirection: 'row-reverse',
        }}
      >
        <a
          href="https://x.com/cpojer"
          style={{
            color: '#fff',
            textDecorationColor: 'rgba(255, 255, 255, 0.3)',
          }}
        >
          @cpojer
        </a>
        ‚Äì
      </div>
    </div>
  </Appear>
</Center>

---

image: /Cover2.jpg

--

<Visible>
  <Center>
    <LiquidGlass>
      <div
        className="title alternate"
        style={{
          width: 900,
          fontSize: '4em',
        }}
      >
        Building Scalable Applications
      </div>
    </LiquidGlass>
  </Center>
</Visible>

---

# What does Scalable mean?

- Move fast with reliable, proven libraries
- End-to-End type safety with great Developer Experience
- Scale from one person to many
- Global order, local chaos
- Few context switches, maximized local reasoning
- Open Source ‚Äì control and own your stack

---

image: /Cover14.jpg

--

<Visible>
  <Center>
    <LiquidGlass>
      <div
        className="title regular"
        style={{
          width: 600,
          fontSize: '3.5em',
        }}
      >
        <Lowercase>and:</Lowercase> Good Taste
      </div>
    </LiquidGlass>
  </Center>
</Visible>

---

image: /Cover3.jpg

--

<Visible>
  <Center>
    <LiquidGlass>
      <div
        className="title regular"
        style={{
          width: 800,
          fontSize: '3.5em',
        }}
      >
        But where do I start?
      </div>
    </LiquidGlass>
  </Center>
</Visible>

---

# Let's build a mobile app

<Center>
  React Native? Expo? New Architecture? Which Navigation stack? Which List View?
  Are the versions compatible? How to make it fast? How should I style my
  components? Which packages do I need to install? How do I build it? i18n
  „ÅÆ„ÇÑ„ÇäÊñπ„ÅØ‰Ωï„Åß„Åô„Åã? How do I set up &lt;anything&gt;? CJS, ESM? ‚Ä¶? _Too many
  decisions._
</Center>

---

image: /Cover4.jpg

--

<Visible>
  <Center>
    <LiquidGlass saturation={124}>
      <div
        className="title regular"
        style={{
          width: 800,
          fontSize: '3.5em',
        }}
      >
        <a
          href="https://github.com/nkzw-tech/expo-app-template"
          target="_blank"
        >
          <div>nkzw-tech/</div>
          <div>expo-app-template</div>
        </a>
      </div>
    </LiquidGlass>
  </Center>
</Visible>

---

<Appear>
  <Center>![image](/ExpoAppTemplate.png)</Center>
</Appear>

---

# Foundation

- [TypeScript](https://www.typescriptlang.org)
- [ESLint](https://eslint.org/) with [Prettier](https://prettier.io/)
- [pnpm](https://pnpm.io/) as package manager
- [vitest](https://vitest.dev/) for testing
- **ESM:** _It's 2025._ This template comes with `"type": "module"`

---

<Center>

# Boring!

</Center>

---

<Center>

# T<Lowercase>here are faster tools out there!</Lowercase>

</Center>

---

image: /Cover15.jpg

--

<Visible>
  <Center>
    <LiquidGlass>
      <div
        className="title regular"
        style={{
          width: 800,
          fontSize: '3.5em',
        }}
      >
        Give it five minutes
      </div>
    </LiquidGlass>
  </Center>
</Visible>

---

# Everything is optimized!

- Prettier uses the `--experimental-cli` and the [Oxc Rust JavaScript parser](https://oxc.rs/)
- `npm-run-all2` runs lint, tests etc. in parallel
- ESLint with great defaults, auto-fixers, and caching
  - Based on [`@nkzw/eslint-config`](https://github.com/nkzw-tech/eslint-config)
  - Oxlint will support ESLint plugins in the future
- _tl;dr: **Move fast, never get in the way**_

---

<Appear>
  <Center>![image](/ESLint1.png)</Center>
</Appear>

---

transition: none

--

<Center>![image](/ESLint2.png)</Center>

---

transition: none

--

<Center>![image](/ESLint3.png)</Center>

---

transition: none

--

<Center>![image](/ESLint4.png)</Center>

---

transition: leaveOnly

--

<Center>![image](/ESLint5.png)</Center>

---

<Visible>
  <Video src="/Props.mp4" />
</Visible>

---

# Foundation ‚Äì Part 2

- Expo 53 & React Native 0.79 (Soon Expo 54)
- [Expo Router](https://docs.expo.dev/router/introduction/)
- [Nativewind](https://www.nativewind.dev/) & [Tailwind CSS](https://tailwindcss.com/)
  - [Uniwind](https://uniwind.dev) soon?
- [`<Stack />`](https://github.com/nkzw-tech/stack)
- [React Compiler](https://react.dev/learn/react-compiler)
- [fbtee](https://github.com/nkzw-tech/fbtee) for i18n

---

# <Question>Why Nativewind & Tailwind?</Question>

<div style={{fontSize: '0.65em', alignSelf: 'center', width: '80%'}}>

```tsx
<Pressable>
  {({ pressed }) => (
    <View style={[viewStyle, { opacity: pressed ? 0.5 : 1 }]}>
      <Text>Tap me!</Text>
    </View>
  )}
</Pressable>
```

</div>

<div style={{fontSize: '0.65em', alignSelf: 'center', width: '80%'}}>

```tsx
<Pressable className="active:opacity-50">
  <View className="flex-row items-center gap-2">
    <Text>Tap me!</Text>
  </View>
</Pressable>
```

</div>

---

transition: leaveOnly

--

# <Lowercase>@nkzw/stack</Lowercase>

<div style={{fontSize: '0.65em', alignSelf: 'center', width: '80%'}}>

```tsx
<Pressable>
  {({ pressed }) => (
    <View style={[viewStyle, { opacity: pressed ? 0.5 : 1 }]}>
      <Text>Tap me!</Text>
    </View>
  )}
</Pressable>
```

</div>

<div style={{fontSize: '0.65em', alignSelf: 'center', width: '80%'}}>

```tsx {1} {3}
<Pressable className="active:opacity-50">
  <Stack alignCenter gap>
    <Text>Tap me!</Text>
  </Stack>
</Pressable>
```

</div>

---

<Appear>
  <Center>![image](/Stack.png)</Center>
</Appear>

---

# <Lowercase>@nkzw/stack</Lowercase>

<Center>
  <div style={{ display: 'flex', flexDirection: 'column', gap: 16}}>
    <div style={{ textAlign: 'center' }}>Maybe ü§î</div>

    <s style={{textDecorationColor: '#e00'}}>

    ```tsx
    import { View } from 'react-native';
    ```

    </s>

    ```tsx
    import { Stack } from 'react-native';
    ```

  </div>
</Center>

---

# <Question>Wait, what's **fbtee**?</Question>

- `fbt` is Facebook's internationalization library
- It was open sourced, but later abandoned
- [**`fbtee`**](https://github.com/nkzw-tech/fbtee) is a modern rewrite of `fbt` in TypeScript
- **fbtee**'s compiler enables inline translations:

```tsx
<Text className="text-xl font-bold">
  <fbt desc="Greeting">Welcome</fbt>
</Text>
```

---

# <Lowercase>fbtee</Lowercase>

<div style={{fontSize: '0.65em', alignSelf: 'center'}}>

```tsx
const WelcomeMessage = ({ messageCount, user }) => (
  <fbt desc="Welcome message on Home">
    Welcome back, <UserWithAvatar user={user} />! You have
    <fbt:plural
      count={messageCount}
      many="messages"
      name="number of messages"
      showCount="ifMany"
    >
      one message
    </fbt:plural>.
  </fbt>
);
```

</div>

---

image: /fbtee.png

--

<div style={{ position: 'absolute', right: 170, top: 80 }}>
  <LiquidGlass saturation={124}>
    <div
      className="title regular no-color-link"
      style={{
        width: 200,
      }}
    >
      <a href="https://fbtee.dev" target="_blank">
        fbtee.dev
      </a>
    </div>
  </LiquidGlass>
</div>

---

image: /Relang.png

--

<div style={{ position: 'absolute', right: 170, top: 80 }}>
  <LiquidGlass saturation={124}>
    <div
      className="title regular no-color-link"
      style={{
        width: 200,
      }}
    >
      <a href="https://relang.dev" target="_blank">
        relang.dev
      </a>
    </div>
  </LiquidGlass>
</div>

---

# Foundation ‚Äì Part 3

- [Legend List v2](https://github.com/LegendApp/legend-list)
- [`react-native-svg`](https://github.com/software-mansion/react-native-svg) and [`react-native-svg-transformer`](https://github.com/kristerkari/react-native-svg-transformer)
- [`@gorhom/bottom-sheet`](https://github.com/gorhom/react-native-bottom-sheet)
- [`expo-build-disk-cache`](https://github.com/WookieFPV/expo-build-disk-cache)

---

<Appear>
  <Center>
    <img className="nostyle" src="/Expo.png" />
  </Center>
</Appear>

---

theme: dark

--

---

image: /Cover5.jpg

--

<Visible>
  <Center>
    <LiquidGlass saturation={124}>
      <div
        className="title regular"
        style={{
          width: 700,
          fontSize: '3.5em',
        }}
      >
        But‚Ä¶ We also need to build a backend!
      </div>
    </LiquidGlass>
  </Center>
</Visible>

---

image: /Cover6.jpg

--

<Visible>
  <Center>
    <LiquidGlass saturation={124}>
      <div
        className="title regular"
        style={{
          width: 800,
          fontSize: '3.5em',
        }}
      >
        <a href="https://github.com/nkzw-tech/server-template" target="_blank">
          <div>nkzw-tech/</div>
          <div>server-template</div>
        </a>
      </div>
    </LiquidGlass>
  </Center>
</Visible>

---

<Appear>
  <Center>![image](/ServerTemplate.png)</Center>
</Appear>

---

# The Server Template

- Same _DevX setup_!
- Restarts instantly on file changes
- Type safety from the Database to the Client
- GraphQL enables loose coupling, ideal for mobile apps!

---

# <Question>What's in the box?</Question>

- [Prisma](https://www.prisma.io/) as ORM & [Pothos](https://pothos-graphql.dev/) as the GraphQL schema builder
- [`prisma-json-types-generator`](https://github.com/arthurfiorette/prisma-json-types-generator) for type safe JSON types
- [`graphql-yoga`](https://the-guild.dev/graphql/yoga-server)
- [Hono](https://hono.dev/) as HTTP server & [Better Auth](https://better-auth.com/) for authentication

---

# Type Safety: Prisma

<div style={{ textAlign: 'center' }}>
  First, we define our [Prisma
  schema](https://github.com/nkzw-tech/server-template/blame/main/src/prisma/schema.prisma):
</div>

<div style={{fontSize: '0.65em', alignSelf: 'center'}}>

```prisma
model User {
  id            String          @unique @default(uuid(7))
  created       DateTime        @default(now())
  email         String          @unique
  locale        String          @default("en_US")
  name          String
  password      String
  role          String          @default("user")
  username      String          @unique

  @@index([id(sort: Asc)])
}
```

</div>

---

transition: none

--

# Type Safety: Pothos

Then, we use [Pothos](https://pothos-graphql.dev/) to define the GraphQL schema:

<div style={{fontSize: '0.55em'}}>

```tsx
builder.prismaNode('User', {
  fields: (t) => ({

    displayName: t.exposeString('displayName', { nullable: false }),
    email: t.string({
      authScopes: (user) => ({ self: user.id })
      resolve: ({ email }) => email,
    }),
    locale: t.exposeString('locale', { nullable: false }),
    username: t.exposeString('username', { nullable: false }),

  }),
  id: { field: 'id' },
});
```

</div>

---

transition: none

--

# Type Safety: Pothos

Then, we use [Pothos](https://pothos-graphql.dev/) to define the GraphQL schema:

<div style={{fontSize: '0.55em'}}>

```tsx
builder.prismaNode('User', {
  fields: (t) => ({

    displayName: t.exposeString('displayName', { nullable: false }),
    email: t.string({
      authScopes: (user) => ({ self: user.id })
      resolve: ({ email }) => email,
    }),
    locale: t.exposeString('locale', { nullable: false }),
    username: t.exposeString('usrname', { nullable: false }),
                         // TS: ^ Argument of type '"usrname"' is not assignable [‚Ä¶]
  }),
  id: { field: 'id' },
});
```

</div>

---

transition: leaveOnly

--

# Type Safety: GraphQL

<div style={{ textAlign: 'center' }}>
  Now, our GraphQL schema looks like this:
</div>

<Center>
<div style={{fontSize: '0.65em', alignSelf: 'center'}}>

```graphql
type User implements Node {
  displayName: String!
  email: String @auth(self: true)
  id: ID!
  locale: String!
  username: String!
}
```

</div>
</Center>

---

image: /Cover7.jpg

--

<Visible>
  <Center>
    <LiquidGlass saturation={124}>
      <div
        className="title regular"
        style={{
          width: 700,
          fontSize: '3.5em',
        }}
      >
        Now all we need is a GraphQL client!
      </div>
    </LiquidGlass>
  </Center>
</Visible>

---

image: /Cover8.jpg

--

<Visible>
  <Center>
    <LiquidGlass saturation={124}>
      <div
        style={{
          width: 700,
          fontSize: '2.4em',
        }}
      >
        <a
          href="https://github.com/nkzw-tech/expo-app-template/tree/with-relay"
          target="_blank"
        >
          <div className="title no-color regular">nkzw-tech/</div>
          <div className="title no-color regular">expo-app-template</div>
          <div className="title regular">tree/with-relay</div>
        </a>
      </div>
    </LiquidGlass>
  </Center>
</Visible>

---

# Relay

- GraphQL client for React built by Facebook
- Declarative queries instead of manual data fetches
  - _Only one query per full-screen view!_
- Built-in support for pagination and optimistic updates
- Composable fragments enable local reasoning

---

# Relay

<div style={{ display: 'flex', flexDirection: 'row', gap: 16}}>
<div style={{fontSize: '0.66em', alignSelf: 'center'}}>

```tsx
// User Card Component
const user = useFragment(
  graphql`
    fragment UserFragment on User {
      displayName
      email
      username
    }
  `,
  userKey
);
```

</div>
<div style={{fontSize: '0.66em', alignSelf: 'center'}}>

```tsx
return (
  <Card>
    <h1>{user.displayName}</h1>
    <div>Email: {user.email}</div>
    <p>Username: {user.username}</p>
  </Card>
);
```

</div>
</div>

---

# Local Reasoning

<div style={{fontSize: '0.42em', alignSelf: 'center'}}>

```tsx
const UserCard = ({ userKey }) => {
  const user = useFragment(
    graphql`
      fragment UserFragment on User {
        displayName
        ‚Ä¶
      }
    `,
    userKey
  );

  return (
    <Stack className="bg-indigo-500" gap>
      <Text className="text-lg font-bold">
        <fbt desc="Greeting">
          Hello, <fbt:param name="name">{user.displayName}</fbt:param>
        </fbt>
      </Text>
    </Stack>
  );
};
```

</div>

---

transition: leaveOnly

--

# Local Reasoning & Type Safe

<div style={{ display: 'flex', flexDirection: 'row', gap: 16}}>
<div style={{fontSize: '0.4em', alignSelf: 'start'}}>

```tsx
// Client
const UserCard = ({ userKey }) => {
  const user = useFragment(
    graphql`
      fragment UserFragment on User {
        displayName
        ‚Ä¶
      }
    `,
    userKey
  );
  return (
    <VStack className="bg-indigo-500" gap>
      <Text className="text-lg font-bold">
        <fbt desc="Greeting">
          Hello, <fbt:param name="name">{user.displayName}</fbt:param>
        </fbt>
      </Text>
    </VStack>
  );
};
```

</div>
<div style={{fontSize: '0.4em', alignSelf: 'start'}}>

```tsx
// Server
builder.prismaNode('User', {
  fields: (t) => ({
    displayName: t.exposeString('displayName'),
    email: t.string({
      authScopes: (user) => ({ self: user.id })
      resolve: ({ email }) => email,
    }),
    locale: t.exposeString('locale'),
    username: t.exposeString('username'),
  }),
  id: { field: 'id' },
});
```

</div>
</div>

---

theme: dark

--

---

image: /Cover11.jpg

--

<Visible>
  <Center>
    <LiquidGlass>
      <div
        className="title regular"
        style={{
          width: 720,
          fontSize: '3.5em',
        }}
      >
        But‚Ä¶ what if we also need a web app?
      </div>
    </LiquidGlass>
  </Center>
</Visible>

---

image: /Cover9.jpg

--

<Visible>
  <Center>
    <LiquidGlass saturation={124}>
      <div
        className="title regular"
        style={{
          width: 800,
          fontSize: '3.5em',
        }}
      >
        <a href="https://github.com/nkzw-tech/web-app-template" target="_blank">
          <div>nkzw-tech/</div>
          <div>web-app-template</div>
        </a>
      </div>
    </LiquidGlass>
  </Center>
</Visible>

---

<Appear>
  <Center>![image](/WebAppTemplate.png)</Center>
</Appear>

---

image: /Cover10.jpg

--

<Visible>
  <Center>
    <LiquidGlass saturation={124}>
      <div
        className="title regular"
        style={{
          width: 800,
          fontSize: '3.5em',
        }}
      >
        <a href="https://github.com/nkzw-tech/library-template" target="_blank">
          <div>nkzw-tech/</div>
          <div>library-template</div>
        </a>
      </div>
    </LiquidGlass>
  </Center>
</Visible>

---

# Library Template

- Build new JavaScript libraries quickly with TypeScript, ESM, and [`tsdown`](https://tsdown.dev/)
- Again, same _DevX setup_!
- Uses [Rolldown](https://rolldown.rs/) for bundling
- Ship new packages to npm quickly

---

theme: dark

--

<Visible>
  <Video src="/AC.mp4" className="video-shadow" />
</Visible>

---

theme: dark

--

<Center>

<div className="title regular demo">_Demo_</div>

</Center>

---

image: /Cover13.jpg

--

---

image: /Cover12.png
transition: opacity

--

<Visible>
  <Center>
    <div
      style={{
        display: 'grid',
        gap: 0,
        gridTemplateColumns: 'repeat(2, 1fr)',
        gridTemplateRows: 'repeat(2, 1fr)',
        height: '75%',
        left: '30%',
        position: 'absolute',
        top: '30%',
        width: '75%',
      }}
    >
      <div style={{ position: 'relative' }}>
        <LiquidGlass>
          <div
            className="title regular simple"
            style={{ fontSize: '2em', width: 400 }}
          >
            <a href="https://github.com/nkzw-tech/expo-app-template">
              <div>nkzw-tech/</div>
              <div>expo-app-template</div>
            </a>
          </div>
        </LiquidGlass>
      </div>
      <LiquidGlass>
        <div
          className="title regular simple"
          style={{ fontSize: '2em', width: 400 }}
        >
          <a href="https://github.com/nkzw-tech/web-app-template">
            <div>nkzw-tech/</div>
            <div>web-app-template</div>
          </a>
        </div>
      </LiquidGlass>
      <LiquidGlass>
        <div
          className="title regular simple"
          style={{ fontSize: '2em', width: 400 }}
        >
          <a href="https://github.com/nkzw-tech/server-template">
            <div>nkzw-tech/</div>
            <div>server-template</div>
          </a>
        </div>
      </LiquidGlass>
      <LiquidGlass>
        <div
          className="title regular simple"
          style={{ fontSize: '2em', width: 400 }}
        >
          <a href="https://github.com/nkzw-tech/library-template">
            <div>nkzw-tech/</div>
            <div>library-template</div>
          </a>
        </div>
      </LiquidGlass>
    </div>
  </Center>
</Visible>

---

transition: opacity
image: /Cover12.png

--

<Visible>
  <Center>
    <div
      style={{
        display: 'grid',
        gap: 0,
        gridTemplateColumns: 'repeat(2, 1fr)',
        gridTemplateRows: 'repeat(2, 1fr)',
        height: '122%',
        left: '25%',
        position: 'absolute',
        top: '18%',
        width: '100%',
      }}
    >
      <div style={{ position: 'relative' }}>
        <LiquidGlass>
          <div
            className="title regular simple"
            style={{ fontSize: '2em', width: 400 }}
          >
            <a href="https://github.com/nkzw-tech/expo-app-template">
              <div>nkzw-tech/</div>
              <div>expo-app-template</div>
            </a>
          </div>
        </LiquidGlass>
      </div>
      <LiquidGlass>
        <div
          className="title regular simple"
          style={{ fontSize: '2em', width: 400 }}
        >
          <a href="https://github.com/nkzw-tech/web-app-template">
            <div>nkzw-tech/</div>
            <div>web-app-template</div>
          </a>
        </div>
      </LiquidGlass>
      <LiquidGlass>
        <div
          className="title regular simple"
          style={{ fontSize: '2em', width: 400 }}
        >
          <a href="https://github.com/nkzw-tech/server-template">
            <div>nkzw-tech/</div>
            <div>server-template</div>
          </a>
        </div>
      </LiquidGlass>
      <LiquidGlass>
        <div
          className="title regular simple"
          style={{ fontSize: '2em', width: 400 }}
        >
          <a href="https://github.com/nkzw-tech/library-template">
            <div>nkzw-tech/</div>
            <div>library-template</div>
          </a>
        </div>
      </LiquidGlass>
    </div>
  </Center>
  <Center
    style={{
      position: 'absolute',
      inset: 0,
      pointerEvents: 'none',
      fontFamily: 'SalesforceSansBold',
    }}
  >
    <div
      style={{
        backdropFilter: 'blur(4px)',
        borderRadius: 60,
        width: 920,
      }}
    >
      <h1 className="simple" style={{ margin: 0 }}>
        What do you want to create today?
      </h1>
    </div>
  </Center>
</Visible>

---

<h1 className="alternate">
  R<Lowercase>e</Lowercase>MDX
</h1>

<div className="alternate-text">

- This talk was created using <span className="alternate">**R<Lowercase>e</Lowercase>MDX**</span>!
- **Slides:** [scalable-apps.nakazawa.dev](https://scalable-apps.nakazawa.dev)
- **Source:**
  [`nkzw-tech/`
  `building-scalable-applications-talk`](https://github.com/nkzw-tech/building-scalable-applications-talk)
- **Beautiful React & MDX Presentations:** [`nkzw-tech/remdx`](https://github.com/nkzw-tech/remdx)
- [`@nkzw/liquid-glass`](https://github.com/nkzw-tech/liquid-glass) ü§™

</div>

---

image: /Cover1.jpg

--

<Visible>
  <Center>
    <LiquidGlass saturation={192}>
      <QRCode width={500} height={500} />
    </LiquidGlass>
  </Center>
</Visible>
